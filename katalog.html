<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KATALOG â€” Produk Pilihan Terbaik</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800;900&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #0b0b18;
      --bg2: #13131f;
      --cyan: #00d4ff;
      --pink: #ff006e;
      --card-border: rgba(255,255,255,0.08);
      --text: #e8e8f0;
      --muted: #6b6b8a;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 0;
      opacity: 0.4;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--card-border);
      background: rgba(11,11,24,0.85);
    }

    .header-inner {
      max-width: 1280px;
      margin: 0 auto;
      padding: 20px 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      font-family: 'Syne', sans-serif;
      font-size: 2.2rem;
      font-weight: 900;
      color: #fff;
      letter-spacing: -1px;
    }

    .logo span {
      background: linear-gradient(135deg, var(--cyan), var(--pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo-sub {
      font-size: 0.75rem;
      color: var(--muted);
      font-weight: 500;
      margin-top: 2px;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .badge {
      background: linear-gradient(135deg, rgba(0,212,255,0.15), rgba(255,0,110,0.15));
      border: 1px solid rgba(0,212,255,0.3);
      color: var(--cyan);
      padding: 6px 16px;
      border-radius: 100px;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 1px;
    }

    main {
      max-width: 1280px;
      margin: 0 auto;
      padding: 48px 32px;
      position: relative;
      z-index: 1;
    }

    .filter-wrap {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 48px;
    }

    .filter-btn {
      padding: 10px 22px;
      border-radius: 100px;
      border: none;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      font-weight: 600;
      font-size: 0.85rem;
      transition: all 0.25s ease;
      background: var(--bg2);
      color: var(--muted);
      border: 1px solid var(--card-border);
    }

    .filter-btn:hover { color: var(--text); border-color: rgba(255,255,255,0.2); }

    .filter-btn.active {
      background: linear-gradient(135deg, var(--cyan), var(--pink));
      color: #fff;
      border-color: transparent;
      box-shadow: 0 0 24px rgba(0,212,255,0.35);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 20px;
    }

    .card {
      border-radius: 20px;
      padding: 28px;
      height: 290px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, rgba(0,212,255,0.07), rgba(255,0,110,0.07));
      border: 1px solid var(--card-border);
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      animation: fadeUp 0.4s ease both;
    }

    .card:hover {
      transform: translateY(-6px) scale(1.02);
      border-color: rgba(0,212,255,0.3);
      box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 40px rgba(0,212,255,0.1);
    }

    .card-media {
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
    }

    .card:hover .card-media { transform: scale(1.15) rotate(-5deg); }

    .card-media-emoji { font-size: 3.2rem; line-height: 1; }
    .card-media-img { width: 60px; height: 60px; object-fit: cover; border-radius: 12px; border: 1px solid var(--card-border); }

    .card-name {
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 1rem;
      color: #fff;
      margin-bottom: 6px;
      line-height: 1.3;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .card-rating { font-size: 0.78rem; color: var(--muted); margin-bottom: 8px; }
    .card-rating span { color: #facc15; }
    .card-price { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.2rem; color: var(--cyan); }
    .card-cicilan { font-size: 0.72rem; color: var(--muted); margin-top: 4px; }

    .card-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.88) 0%, transparent 60%);
      opacity: 0;
      transition: opacity 0.3s ease;
      display: flex;
      align-items: flex-end;
      padding: 20px;
    }

    .card:hover .card-overlay { opacity: 1; }

    .card-overlay-btn {
      width: 100%;
      padding: 10px;
      background: linear-gradient(135deg, var(--cyan), var(--pink));
      color: #fff;
      border: none;
      border-radius: 10px;
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 0.85rem;
      cursor: pointer;
      letter-spacing: 0.5px;
    }

    /* MODAL */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 200;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .modal-backdrop.open { opacity: 1; pointer-events: all; }

    .modal {
      background: var(--bg2);
      border: 1px solid var(--card-border);
      border-radius: 28px;
      width: 100%;
      max-width: 560px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      transform: translateY(30px) scale(0.96);
      transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .modal-backdrop.open .modal { transform: translateY(0) scale(1); }
    .modal::-webkit-scrollbar { width: 4px; }
    .modal::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }

    .modal-body { padding: 40px; }

    .modal-close {
      position: sticky;
      top: 16px;
      left: 100%;
      width: 36px;
      height: 36px;
      background: rgba(255,255,255,0.08);
      border: 1px solid var(--card-border);
      border-radius: 50%;
      color: #fff;
      font-size: 1.1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
      float: right;
      margin: 16px 16px 0 0;
    }

    .modal-close:hover { background: rgba(255,255,255,0.15); }

    .modal-img-wrap { text-align: center; margin-bottom: 24px; margin-top: 8px; }
    .modal-img-emoji { font-size: 5rem; }
    .modal-img-url { width: 120px; height: 120px; object-fit: cover; border-radius: 20px; border: 2px solid var(--card-border); }

    .modal-title { font-family: 'Syne', sans-serif; font-weight: 900; font-size: 1.8rem; color: #fff; margin-bottom: 10px; line-height: 1.2; }
    .modal-stars { color: #facc15; font-size: 1.1rem; }
    .modal-rating-text { color: var(--muted); font-size: 0.85rem; margin-left: 8px; }

    .modal-price-box {
      background: linear-gradient(135deg, rgba(0,212,255,0.12), rgba(255,0,110,0.12));
      border: 1px solid rgba(0,212,255,0.25);
      border-radius: 16px;
      padding: 20px 24px;
      margin: 20px 0;
    }

    .modal-price-label { font-size: 0.75rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; }
    .modal-price-value {
      font-family: 'Syne', sans-serif;
      font-weight: 900;
      font-size: 2rem;
      background: linear-gradient(135deg, var(--cyan), var(--pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .cicilan-title { font-family: 'Syne', sans-serif; font-weight: 700; color: #fff; margin-bottom: 14px; font-size: 1rem; }

    .cicilan-btn {
      width: 100%;
      padding: 16px 20px;
      border-radius: 14px;
      border: 2px solid rgba(255,255,255,0.08);
      background: transparent;
      color: var(--text);
      cursor: pointer;
      margin-bottom: 10px;
      transition: all 0.2s ease;
      text-align: left;
      font-family: 'DM Sans', sans-serif;
    }

    .cicilan-btn:hover { border-color: var(--cyan); background: rgba(0,212,255,0.08); }

    .cicilan-row { display: flex; justify-content: space-between; align-items: baseline; }
    .cicilan-months { font-family: 'Syne', sans-serif; font-weight: 700; color: #fff; font-size: 1rem; }
    .cicilan-per-bulan { font-size: 0.8rem; color: var(--muted); margin-top: 8px; }
    .cicilan-amount { font-weight: 700; color: var(--cyan); font-size: 1rem; }
    .cicilan-total-row { display: flex; justify-content: space-between; margin-top: 6px; }
    .cicilan-total-label { font-size: 0.78rem; color: var(--muted); }
    .cicilan-total-val { font-size: 0.78rem; font-weight: 600; color: #ff6eb0; }
    .cicilan-bunga { font-size: 0.72rem; color: #fb923c; margin-top: 4px; text-align: right; }
    .cicilan-divider { border: none; border-top: 1px solid rgba(255,255,255,0.06); margin: 8px 0; }

    .features {
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--card-border);
      border-radius: 14px;
      padding: 16px 20px;
      margin: 20px 0;
    }

    .feature-item { display: flex; align-items: center; gap: 10px; padding: 6px 0; font-size: 0.88rem; color: rgba(255,255,255,0.75); }
    .feature-item:not(:last-child) { border-bottom: 1px solid rgba(255,255,255,0.05); }
    .check { color: #4ade80; font-size: 1rem; }

    .wa-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #fff;
      border: none;
      border-radius: 14px;
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.25s ease;
      box-shadow: 0 4px 20px rgba(34,197,94,0.3);
    }

    .wa-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(34,197,94,0.45); }

    @media (max-width: 600px) {
      .header-inner { padding: 16px 20px; }
      main { padding: 32px 20px; }
      .logo { font-size: 1.8rem; }
      .modal-body { padding: 24px; }
      .modal-title { font-size: 1.4rem; }
      .modal-price-value { font-size: 1.6rem; }
    }

    @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>

<header>
  <div class="header-inner">
    <div>
      <div class="logo">KATALOG<span>.</span></div>
      <div class="logo-sub">Produk Pilihan Terbaik</div>
    </div>
    <div class="badge" id="prodBadge">âœ¦ Memuat...</div>
  </div>
</header>

<main>
  <div class="filter-wrap" id="filterWrap"></div>
  <div class="grid" id="productGrid"></div>
</main>

<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal" id="modal">
    <button class="modal-close" id="modalClose">âœ•</button>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<script>
  // â”€â”€â”€ DATA (baca dari localStorage, fallback ke default) â”€â”€â”€â”€â”€
  const DEFAULT_PRODUCTS = [
    { id:1, name:'Smartphone Flagship Pro', price:8500000, category:'handphone', image:'ðŸ“±', rating:4.9, reviews:567, cicilan:[{bulan:3,cicilan:2850000},{bulan:6,cicilan:1480000},{bulan:12,cicilan:830000}] },
    { id:2, name:'Smartphone Mid Range', price:4500000, category:'handphone', image:'ðŸ“±', rating:4.6, reviews:312, cicilan:[{bulan:3,cicilan:1500000},{bulan:6,cicilan:780000},{bulan:12,cicilan:440000}] },
    { id:3, name:'Smartphone Budget Terjangkau', price:2200000, category:'handphone', image:'ðŸ“±', rating:4.4, reviews:198, cicilan:[{bulan:3,cicilan:740000},{bulan:6,cicilan:380000},{bulan:12,cicilan:210000}] },
    { id:4, name:'Laptop Gaming RTX 4090', price:25000000, category:'laptop', image:'ðŸ’»', rating:4.9, reviews:423, cicilan:[{bulan:3,cicilan:8350000},{bulan:6,cicilan:4350000},{bulan:12,cicilan:2450000}] },
    { id:5, name:'Laptop Ultrabook Premium', price:15000000, category:'laptop', image:'ðŸ’»', rating:4.8, reviews:289, cicilan:[{bulan:3,cicilan:5050000},{bulan:6,cicilan:2600000},{bulan:12,cicilan:1450000}] },
    { id:6, name:'Laptop Kerja Efisien', price:8000000, category:'laptop', image:'ðŸ’»', rating:4.5, reviews:156, cicilan:[{bulan:3,cicilan:2670000},{bulan:6,cicilan:1400000},{bulan:12,cicilan:780000}] },
    { id:7, name:'Headphone Wireless Premium', price:2200000, category:'elektronik', image:'ðŸŽ§', rating:4.9, reviews:412, cicilan:[{bulan:3,cicilan:740000},{bulan:6,cicilan:380000},{bulan:12,cicilan:210000}] },
    { id:8, name:'Monitor 4K Ultra', price:5500000, category:'elektronik', image:'ðŸ–¼ï¸', rating:4.7, reviews:298, cicilan:[{bulan:3,cicilan:1850000},{bulan:6,cicilan:960000},{bulan:12,cicilan:540000}] },
    { id:9, name:'Keyboard Mechanical RGB', price:1800000, category:'elektronik', image:'âŒ¨ï¸', rating:4.8, reviews:521, cicilan:[{bulan:3,cicilan:600000},{bulan:6,cicilan:310000},{bulan:12,cicilan:175000}] },
    { id:10, name:'Mouse Gaming Pro', price:900000, category:'elektronik', image:'ðŸ–±ï¸', rating:4.6, reviews:234, cicilan:[{bulan:3,cicilan:300000},{bulan:6,cicilan:155000},{bulan:12,cicilan:85000}] },
    { id:11, name:'Kamera DSLR Professional', price:18000000, category:'kamera', image:'ðŸ“·', rating:4.9, reviews:345, cicilan:[{bulan:3,cicilan:6050000},{bulan:6,cicilan:3150000},{bulan:12,cicilan:1760000}] },
    { id:12, name:'Mirrorless Kompak', price:12000000, category:'kamera', image:'ðŸ“·', rating:4.8, reviews:267, cicilan:[{bulan:3,cicilan:4050000},{bulan:6,cicilan:2100000},{bulan:12,cicilan:1170000}] },
    { id:13, name:'Action Camera 4K', price:3500000, category:'kamera', image:'ðŸ“·', rating:4.7, reviews:189, cicilan:[{bulan:3,cicilan:1170000},{bulan:6,cicilan:610000},{bulan:12,cicilan:340000}] },
    { id:14, name:'Kursi Gaming Ergonomis', price:3500000, category:'furniture', image:'ðŸª‘', rating:4.5, reviews:189, cicilan:[{bulan:3,cicilan:1170000},{bulan:6,cicilan:610000},{bulan:12,cicilan:340000}] },
    { id:15, name:'Meja Kerja Minimalis', price:2800000, category:'furniture', image:'ðŸ–¥ï¸', rating:4.6, reviews:156, cicilan:[{bulan:3,cicilan:940000},{bulan:6,cicilan:490000},{bulan:12,cicilan:275000}] },
    { id:16, name:'Lampu LED Smart', price:1200000, category:'furniture', image:'ðŸ’¡', rating:4.4, reviews:234, cicilan:[{bulan:3,cicilan:400000},{bulan:6,cicilan:210000},{bulan:12,cicilan:120000}] },
    { id:17, name:'Rak Display Modern', price:1600000, category:'furniture', image:'ðŸ“š', rating:4.5, reviews:123, cicilan:[{bulan:3,cicilan:540000},{bulan:6,cicilan:280000},{bulan:12,cicilan:160000}] },
  ];

  function getProducts() {
    try {
      const d = localStorage.getItem('katalog_products');
      return d ? JSON.parse(d) : DEFAULT_PRODUCTS;
    } catch { return DEFAULT_PRODUCTS; }
  }

  const categories = [
    { key:'all', label:'ðŸ›ï¸ Semua' },
    { key:'handphone', label:'ðŸ“± Handphone' },
    { key:'laptop', label:'ðŸ’» Laptop' },
    { key:'elektronik', label:'ðŸŽ§ Elektronik' },
    { key:'kamera', label:'ðŸ“· Kamera' },
    { key:'furniture', label:'ðŸª‘ Furniture' },
  ];

  const fmt = n => new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR',minimumFractionDigits:0}).format(n);
  const stars = r => 'â˜…'.repeat(Math.floor(r)) + 'â˜†'.repeat(5-Math.floor(r));
  const isUrl = s => s && (s.startsWith('http')||s.startsWith('//'));

  let activeCategory = 'all';

  function mediaEl(image, size='card') {
    if (isUrl(image)) {
      const cls = size==='card' ? 'card-media-img' : 'modal-img-url';
      return `<img class="${cls}" src="${image}" alt="produk" onerror="this.style.display='none'"/>`;
    }
    const cls = size==='card' ? 'card-media-emoji' : 'modal-img-emoji';
    return `<span class="${cls}">${image||'ðŸ“¦'}</span>`;
  }

  function renderFilters() {
    const products = getProducts();
    const wrap = document.getElementById('filterWrap');
    wrap.innerHTML = categories.map(c => `
      <button class="filter-btn ${c.key===activeCategory?'active':''}" data-key="${c.key}">${c.label}</button>
    `).join('');
    wrap.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => { activeCategory = btn.dataset.key; renderFilters(); renderGrid(); });
    });
    document.getElementById('prodBadge').textContent = `âœ¦ ${products.length} Produk`;
  }

  function renderGrid() {
    const products = getProducts();
    const filtered = activeCategory==='all' ? products : products.filter(p=>p.category===activeCategory);
    const grid = document.getElementById('productGrid');
    if (!filtered.length) {
      grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:80px;color:var(--muted)">ðŸ˜” Tidak ada produk di kategori ini</div>`;
      return;
    }
    grid.innerHTML = filtered.map((p,i) => `
      <div class="card" style="animation-delay:${i*0.06}s" data-id="${p.id}">
        <div class="card-media">${mediaEl(p.image,'card')}</div>
        <div>
          <div class="card-name">${p.name}</div>
          <div class="card-price">${fmt(p.price)}</div>
          ${p.cicilan&&p.cicilan.length ? `<div class="card-cicilan">Cicilan mulai ${fmt(p.cicilan[0].cicilan)}/bln</div>` : ''}
        </div>
        <div class="card-overlay"><button class="card-overlay-btn">Lihat Detail â†’</button></div>
      </div>
    `).join('');
    grid.querySelectorAll('.card').forEach(card => {
      card.addEventListener('click', () => openModal(Number(card.dataset.id)));
    });
  }

  function openModal(id) {
    const p = getProducts().find(x=>x.id===id);
    if (!p) return;

    const cicilanHtml = (p.cicilan||[]).map(c => {
      const total = c.cicilan * c.bulan;
      const selisih = total - p.price;
      return `
        <button class="cicilan-btn">
          <div class="cicilan-row"><span class="cicilan-months">${c.bulan} Bulan</span></div>
          <div class="cicilan-per-bulan">Cicilan per bulan: <span class="cicilan-amount">${fmt(c.cicilan)}</span></div>
          <hr class="cicilan-divider"/>
          <div class="cicilan-total-row">
            <span class="cicilan-total-label">Total pembayaran:</span>
            <span class="cicilan-total-val">${fmt(total)}</span>
          </div>
          ${selisih>0 ? `<div class="cicilan-bunga">Bunga: +${fmt(selisih)}</div>` : ''}
        </button>
      `;
    }).join('');

    document.getElementById('modalBody').innerHTML = `
      <div class="modal-img-wrap">${mediaEl(p.image,'modal')}</div>
      <div class="modal-title">${p.name}</div>
      <div class="modal-price-box">
        <div class="modal-price-label">Harga Tunai</div>
        <div class="modal-price-value">${fmt(p.price)}</div>
      </div>
      ${cicilanHtml ? `<div class="cicilan-title">Pilihan Cicilan</div>${cicilanHtml}` : ''}
      <div class="features">
        <div class="feature-item"><span class="check">âœ“</span> Garansi Resmi</div>
        <div class="feature-item"><span class="check">âœ“</span> Gratis Ongkos Kirim</div>
        <div class="feature-item"><span class="check">âœ“</span> Bisa Dikembalikan 30 Hari</div>
      </div>
      <button class="wa-btn" id="waBtn"><span style="font-size:1.3rem">ðŸ’¬</span> Hubungi via WhatsApp</button>
    `;

    document.getElementById('waBtn').addEventListener('click', () => {
      const msg = `Halo, saya tertarik dengan ${p.name}\n\nHarga: ${fmt(p.price)}\n\nOpsi cicilan:\n${(p.cicilan||[]).map(c=>`- ${c.bulan} bulan: ${fmt(c.cicilan)}/bulan`).join('\n')}\n\nMohon informasi lebih lanjut.`;
      window.open(`https://wa.me/62?text=${encodeURIComponent(msg)}`, '_blank');
    });

    document.getElementById('modalBackdrop').classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    document.getElementById('modalBackdrop').classList.remove('open');
    document.body.style.overflow = '';
  }

  document.getElementById('modalClose').addEventListener('click', closeModal);
  document.getElementById('modalBackdrop').addEventListener('click', e => {
    if (e.target===document.getElementById('modalBackdrop')) closeModal();
  });
  document.addEventListener('keydown', e => { if(e.key==='Escape') closeModal(); });

  renderFilters();
  renderGrid();
</script>
</body>
</html>
