<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KATALOG ‚Äî Produk Pilihan Terbaik</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800;900&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --red: #e5182a; --red2: #c0111f; --red-light: #ff3347;
      --red-glow: rgba(229,24,42,0.22);
      --white: #ffffff; --off-white: #f8f8f8; --light: #f2f2f2;
      --dark: #1a0305; --text: #1a0305; --muted: #8a8a8a;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background:var(--off-white); color:var(--text); font-family:'Plus Jakarta Sans',sans-serif; min-height:100vh; overflow-x:hidden; }

    /* HEADER */
    header { position:sticky; top:0; z-index:100; background:var(--white); box-shadow:0 2px 20px rgba(229,24,42,0.1); }
    .header-inner { max-width:1280px; margin:0 auto; padding:0 32px; display:flex; align-items:stretch; justify-content:space-between; }
    .logo-wrap { display:flex; align-items:center; padding:18px 0; }
    .logo-accent { width:6px; height:44px; background:linear-gradient(180deg,var(--red),var(--red2)); border-radius:3px; margin-right:14px; }
    .logo { font-family:'Syne',sans-serif; font-size:1.9rem; font-weight:900; color:var(--dark); letter-spacing:-1px; }
    .logo span { color:var(--red); }
    .logo-sub { font-size:0.7rem; color:var(--muted); font-weight:500; letter-spacing:2px; text-transform:uppercase; margin-top:2px; }
    .header-right { display:flex; align-items:center; gap:12px; }
    .prod-count { background:var(--red); color:#fff; padding:6px 16px; border-radius:100px; font-size:0.78rem; font-weight:700; }

    /* HERO */
    .hero { background:linear-gradient(135deg,var(--red2) 0%,var(--red) 50%,var(--red-light) 100%); padding:56px 32px; position:relative; overflow:hidden; }
    .hero::before { content:''; position:absolute; inset:0; background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='20'/%3E%3C/g%3E%3C/svg%3E"); }
    .hero::after { content:''; position:absolute; right:-80px; top:-80px; width:400px; height:400px; background:rgba(255,255,255,0.07); border-radius:50%; }
    .hero-inner { max-width:1280px; margin:0 auto; position:relative; z-index:1; }
    .hero-tag { display:inline-block; background:rgba(255,255,255,0.2); color:#fff; padding:6px 16px; border-radius:100px; font-size:0.78rem; font-weight:600; letter-spacing:1px; margin-bottom:16px; border:1px solid rgba(255,255,255,0.3); }
    .hero h1 { font-family:'Syne',sans-serif; font-size:2.8rem; font-weight:900; color:#fff; line-height:1.1; margin-bottom:12px; }
    .hero p { color:rgba(255,255,255,0.8); font-size:1rem; max-width:500px; }

    /* SEARCH */
    .search-section { max-width:1280px; margin:0 auto; padding:0 32px; transform:translateY(-24px); }
    .search-box { background:var(--white); border-radius:16px; box-shadow:0 8px 40px rgba(0,0,0,0.12); padding:8px 8px 8px 20px; display:flex; align-items:center; gap:12px; }
    .search-icon { color:var(--red); font-size:1.1rem; flex-shrink:0; }
    .search-box input { flex:1; border:none; outline:none; font-family:'Plus Jakarta Sans',sans-serif; font-size:0.95rem; color:var(--text); background:transparent; }
    .search-box input::placeholder { color:var(--muted); }
    .search-btn { padding:12px 24px; background:var(--red); color:#fff; border:none; border-radius:10px; font-family:'Plus Jakarta Sans',sans-serif; font-weight:700; font-size:0.88rem; cursor:pointer; transition:all 0.2s; white-space:nowrap; }
    .search-btn:hover { background:var(--red2); transform:scale(1.03); }

    /* MAIN */
    main { max-width:1280px; margin:0 auto; padding:0 32px 60px; }
    .filter-label { font-size:0.75rem; font-weight:700; color:var(--muted); text-transform:uppercase; letter-spacing:1.5px; margin-bottom:12px; }
    .filter-wrap { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:36px; }
    .filter-btn { padding:10px 20px; border-radius:100px; border:2px solid #e8e8e8; background:var(--white); color:var(--muted); cursor:pointer; font-family:'Plus Jakarta Sans',sans-serif; font-weight:600; font-size:0.83rem; transition:all 0.22s ease; }
    .filter-btn:hover { border-color:var(--red); color:var(--red); transform:translateY(-2px); box-shadow:0 4px 12px var(--red-glow); }
    .filter-btn.active { background:var(--red); color:#fff; border-color:var(--red); box-shadow:0 4px 16px var(--red-glow); }

    .toolbar { display:flex; justify-content:space-between; align-items:center; margin-bottom:24px; flex-wrap:wrap; gap:12px; }
    .result-count { font-size:0.85rem; color:var(--muted); }
    .result-count strong { color:var(--red); }
    .sort-wrap { display:flex; align-items:center; gap:8px; }
    .sort-label { font-size:0.8rem; color:var(--muted); font-weight:600; }
    .sort-select { padding:8px 12px; border:2px solid #e8e8e8; border-radius:10px; background:var(--white); color:var(--text); font-family:'Plus Jakarta Sans',sans-serif; font-size:0.82rem; cursor:pointer; outline:none; transition:border-color 0.2s; }
    .sort-select:focus { border-color:var(--red); }

    /* GRID & CARD */
    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:22px; }
    .card { background:var(--white); border-radius:20px; overflow:hidden; cursor:pointer; position:relative; box-shadow:0 4px 24px rgba(229,24,42,0.08); border:2px solid transparent; transition:all 0.3s cubic-bezier(0.34,1.3,0.64,1); animation:fadeUp 0.4s ease both; }
    .card:hover { transform:translateY(-8px); border-color:var(--red); box-shadow:0 20px 50px var(--red-glow),0 4px 16px rgba(0,0,0,0.08); }

    .card-img-wrap { background:linear-gradient(135deg,#fff5f5,#ffe8e8); height:180px; display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden; }
    .card-emoji { font-size:5rem; transition:transform 0.4s cubic-bezier(0.34,1.56,0.64,1); filter:drop-shadow(0 8px 16px rgba(0,0,0,0.1)); }
    .card:hover .card-emoji { transform:scale(1.2) rotate(-8deg); }
    .card-img { width:140px; height:140px; object-fit:contain; transition:transform 0.4s cubic-bezier(0.34,1.56,0.64,1); filter:drop-shadow(0 8px 20px rgba(0,0,0,0.12)); }
    .card:hover .card-img { transform:scale(1.1); }
    .card-badge { position:absolute; top:12px; left:12px; background:var(--red); color:#fff; padding:4px 10px; border-radius:100px; font-size:0.68rem; font-weight:700; text-transform:uppercase; letter-spacing:0.5px; z-index:1; }

    .card-body { padding:18px 20px 14px; }
    .card-name { font-family:'Syne',sans-serif; font-weight:700; font-size:1rem; color:var(--dark); line-height:1.35; margin-bottom:12px; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
    .card-price { font-family:'Syne',sans-serif; font-weight:800; font-size:1.25rem; color:var(--red); }

    .card-footer { display:flex; align-items:center; justify-content:space-between; padding:12px 20px; border-top:1px solid #f0f0f0; background:#fafafa; }
    .card-cicilan-info { font-size:0.75rem; color:var(--muted); line-height:1.4; }
    .card-btn { padding:8px 16px; background:var(--red); color:#fff; border:none; border-radius:8px; font-family:'Plus Jakarta Sans',sans-serif; font-weight:700; font-size:0.78rem; cursor:pointer; transition:all 0.2s; }
    .card-btn:hover { background:var(--red2); transform:scale(1.05); }

    .empty { text-align:center; padding:80px 20px; color:var(--muted); grid-column:1/-1; }
    .empty-icon { font-size:4rem; margin-bottom:16px; }

    /* MODAL */
    .modal-backdrop { position:fixed; inset:0; background:rgba(26,3,5,0.6); backdrop-filter:blur(8px); z-index:200; display:flex; align-items:center; justify-content:center; padding:16px; opacity:0; pointer-events:none; transition:opacity 0.3s; }
    .modal-backdrop.open { opacity:1; pointer-events:all; }
    .modal { background:var(--white); border-radius:28px; width:100%; max-width:560px; max-height:92vh; overflow-y:auto; position:relative; transform:translateY(32px) scale(0.95); transition:transform 0.4s cubic-bezier(0.34,1.4,0.64,1); box-shadow:0 40px 80px var(--red-glow),0 0 0 1px rgba(229,24,42,0.1); }
    .modal-backdrop.open .modal { transform:translateY(0) scale(1); }
    .modal::-webkit-scrollbar { width:4px; }
    .modal::-webkit-scrollbar-thumb { background:#e8e8e8; border-radius:4px; }

    .modal-header { background:linear-gradient(135deg,var(--red2),var(--red)); padding:32px 32px 0; position:relative; }
    .modal-close { position:absolute; top:16px; right:16px; width:34px; height:34px; background:rgba(255,255,255,0.2); border:1px solid rgba(255,255,255,0.3); border-radius:50%; color:#fff; font-size:1rem; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:background 0.2s; }
    .modal-close:hover { background:rgba(255,255,255,0.35); }
    .modal-img-wrap { display:flex; align-items:center; justify-content:center; height:160px; }
    .modal-img-emoji { font-size:6rem; filter:drop-shadow(0 10px 20px rgba(0,0,0,0.2)); }
    .modal-img-url { width:130px; height:130px; object-fit:contain; filter:drop-shadow(0 10px 20px rgba(0,0,0,0.2)); }

    .modal-body { padding:28px 32px 32px; }
    .modal-cat { font-size:0.72rem; font-weight:700; color:var(--red); text-transform:uppercase; letter-spacing:1.5px; margin-bottom:8px; }
    .modal-title { font-family:'Syne',sans-serif; font-weight:900; font-size:1.7rem; color:var(--dark); line-height:1.2; margin-bottom:20px; }
    .modal-price-box { background:linear-gradient(135deg,#fff0f0,#ffe4e4); border:2px solid rgba(229,24,42,0.15); border-radius:16px; padding:18px 22px; margin-bottom:24px; display:flex; align-items:center; justify-content:space-between; }
    .modal-price-label { font-size:0.75rem; color:var(--muted); text-transform:uppercase; letter-spacing:1px; margin-bottom:4px; }
    .modal-price-value { font-family:'Syne',sans-serif; font-weight:900; font-size:1.9rem; color:var(--red); }

    .cicilan-section { margin-bottom:24px; }
    .cicilan-title { font-family:'Syne',sans-serif; font-weight:700; font-size:1rem; color:var(--dark); margin-bottom:12px; display:flex; align-items:center; gap:8px; }
    .cicilan-title::before { content:''; width:4px; height:18px; background:var(--red); border-radius:2px; }
    .cicilan-btn { width:100%; padding:16px 18px; border-radius:14px; border:2px solid #f0f0f0; background:var(--white); color:var(--text); cursor:pointer; margin-bottom:10px; text-align:left; font-family:'Plus Jakarta Sans',sans-serif; transition:all 0.2s ease; position:relative; overflow:hidden; }
    .cicilan-btn::before { content:''; position:absolute; left:0; top:0; bottom:0; width:4px; background:var(--red); transform:scaleY(0); transition:transform 0.2s; border-radius:0 2px 2px 0; }
    .cicilan-btn:hover { border-color:var(--red); background:#fff5f5; transform:translateX(4px); }
    .cicilan-btn:hover::before { transform:scaleY(1); }
    .cicilan-row { display:flex; justify-content:space-between; align-items:baseline; }
    .cicilan-months { font-family:'Syne',sans-serif; font-weight:700; color:var(--dark); font-size:1rem; }
    .cicilan-per-bulan { font-size:0.8rem; color:var(--muted); margin-top:7px; }
    .cicilan-amount { font-weight:700; color:var(--red); font-size:1rem; }
    .cicilan-total-row { display:flex; justify-content:space-between; margin-top:6px; }
    .cicilan-total-label { font-size:0.78rem; color:var(--muted); }
    .cicilan-total-val { font-size:0.78rem; font-weight:600; color:#666; }
    .cicilan-bunga { font-size:0.72rem; color:#f59e0b; margin-top:4px; text-align:right; font-weight:600; }
    .cicilan-divider { border:none; border-top:1px solid #f5f5f5; margin:8px 0; }

    .features { background:#f9f9f9; border-radius:14px; padding:16px 18px; margin-bottom:24px; }
    .feature-item { display:flex; align-items:center; gap:10px; padding:7px 0; font-size:0.88rem; color:#444; }
    .feature-item:not(:last-child) { border-bottom:1px solid #f0f0f0; }
    .check-icon { width:22px; height:22px; background:#dcfce7; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.7rem; color:#16a34a; flex-shrink:0; }

    .wa-btn { width:100%; padding:16px; background:linear-gradient(135deg,#22c55e,#16a34a); color:#fff; border:none; border-radius:14px; font-family:'Syne',sans-serif; font-weight:700; font-size:1rem; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:10px; transition:all 0.25s; box-shadow:0 4px 20px rgba(34,197,94,0.3); }
    .wa-btn:hover { transform:translateY(-2px); box-shadow:0 8px 30px rgba(34,197,94,0.45); }

    .scroll-top { position:fixed; bottom:28px; right:28px; width:46px; height:46px; background:var(--red); color:#fff; border:none; border-radius:50%; font-size:1.1rem; cursor:pointer; box-shadow:0 4px 16px var(--red-glow); transition:all 0.3s; z-index:99; opacity:0; transform:translateY(20px); }
    .scroll-top.show { opacity:1; transform:translateY(0); }
    .scroll-top:hover { transform:translateY(-4px); background:var(--red2); }

    @media(max-width:640px) {
      .header-inner,main { padding-left:16px; padding-right:16px; }
      .hero { padding:40px 20px; }
      .hero h1 { font-size:2rem; }
      .search-section { padding:0 16px; }
      .modal-header { padding:24px 20px 0; }
      .modal-body { padding:20px; }
      .modal-title { font-size:1.4rem; }
    }
    @keyframes fadeUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
  </style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="logo-wrap">
      <div class="logo-accent"></div>
      <div>
        <div class="logo">KATALOG<span>.</span></div>
        <div class="logo-sub">Produk Pilihan Terbaik</div>
      </div>
    </div>
    <div class="header-right">
      <div class="prod-count" id="prodBadge">17 Produk</div>
    </div>
  </div>
</header>

<div class="hero">
  <div class="hero-inner">
    <div class="hero-tag">üî• Penawaran Terbaik</div>
    <h1>Temukan Produk<br/>Impianmu</h1>
    <p>Pilihan lengkap elektronik, gadget, dan furniture dengan cicilan terjangkau.</p>
  </div>
</div>

<div class="search-section">
  <div class="search-box">
    <span class="search-icon">üîç</span>
    <input type="text" id="searchInput" placeholder="Cari produk, kategori..." oninput="renderGrid()"/>
    <button class="search-btn">Cari</button>
  </div>
</div>

<main>
  <div class="filter-label">Kategori Produk</div>
  <div class="filter-wrap" id="filterWrap"></div>
  <div class="toolbar">
    <div class="result-count" id="resultCount"></div>
    <div class="sort-wrap">
      <span class="sort-label">Urutkan:</span>
      <select class="sort-select" id="sortSelect" onchange="renderGrid()">
        <option value="default">Default</option>
        <option value="price-asc">Harga Terendah</option>
        <option value="price-desc">Harga Tertinggi</option>
        <option value="name-asc">Nama A‚ÄìZ</option>
      </select>
    </div>
  </div>
  <div class="grid" id="productGrid"></div>
</main>

<button class="scroll-top" id="scrollTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚Üë</button>

<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal" id="modal">
    <div class="modal-header">
      <button class="modal-close" id="modalClose">‚úï</button>
      <div class="modal-img-wrap" id="modalImg"></div>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<script>
  const DEFAULT_PRODUCTS = [
    { id:1, name:'Smartphone Flagship Pro', price:8500000, category:'handphone', image:'üì±', cicilan:[{bulan:3,cicilan:2850000},{bulan:6,cicilan:1480000},{bulan:12,cicilan:830000}] },
    { id:2, name:'Smartphone Mid Range', price:4500000, category:'handphone', image:'üì±', cicilan:[{bulan:3,cicilan:1500000},{bulan:6,cicilan:780000},{bulan:12,cicilan:440000}] },
    { id:3, name:'Smartphone Budget Terjangkau', price:2200000, category:'handphone', image:'üì±', cicilan:[{bulan:3,cicilan:740000},{bulan:6,cicilan:380000},{bulan:12,cicilan:210000}] },
    { id:4, name:'Laptop Gaming RTX 4090', price:25000000, category:'laptop', image:'üíª', cicilan:[{bulan:3,cicilan:8350000},{bulan:6,cicilan:4350000},{bulan:12,cicilan:2450000}] },
    { id:5, name:'Laptop Ultrabook Premium', price:15000000, category:'laptop', image:'üíª', cicilan:[{bulan:3,cicilan:5050000},{bulan:6,cicilan:2600000},{bulan:12,cicilan:1450000}] },
    { id:6, name:'Laptop Kerja Efisien', price:8000000, category:'laptop', image:'üíª', cicilan:[{bulan:3,cicilan:2670000},{bulan:6,cicilan:1400000},{bulan:12,cicilan:780000}] },
    { id:7, name:'Headphone Wireless Premium', price:2200000, category:'elektronik', image:'üéß', cicilan:[{bulan:3,cicilan:740000},{bulan:6,cicilan:380000},{bulan:12,cicilan:210000}] },
    { id:8, name:'Monitor 4K Ultra', price:5500000, category:'elektronik', image:'üñºÔ∏è', cicilan:[{bulan:3,cicilan:1850000},{bulan:6,cicilan:960000},{bulan:12,cicilan:540000}] },
    { id:9, name:'Keyboard Mechanical RGB', price:1800000, category:'elektronik', image:'‚å®Ô∏è', cicilan:[{bulan:3,cicilan:600000},{bulan:6,cicilan:310000},{bulan:12,cicilan:175000}] },
    { id:10, name:'Mouse Gaming Pro', price:900000, category:'elektronik', image:'üñ±Ô∏è', cicilan:[{bulan:3,cicilan:300000},{bulan:6,cicilan:155000},{bulan:12,cicilan:85000}] },
    { id:11, name:'Kamera DSLR Professional', price:18000000, category:'kamera', image:'üì∑', cicilan:[{bulan:3,cicilan:6050000},{bulan:6,cicilan:3150000},{bulan:12,cicilan:1760000}] },
    { id:12, name:'Mirrorless Kompak', price:12000000, category:'kamera', image:'üì∑', cicilan:[{bulan:3,cicilan:4050000},{bulan:6,cicilan:2100000},{bulan:12,cicilan:1170000}] },
    { id:13, name:'Action Camera 4K', price:3500000, category:'kamera', image:'üì∑', cicilan:[{bulan:3,cicilan:1170000},{bulan:6,cicilan:610000},{bulan:12,cicilan:340000}] },
    { id:14, name:'Kursi Gaming Ergonomis', price:3500000, category:'furniture', image:'ü™ë', cicilan:[{bulan:3,cicilan:1170000},{bulan:6,cicilan:610000},{bulan:12,cicilan:340000}] },
    { id:15, name:'Meja Kerja Minimalis', price:2800000, category:'furniture', image:'üñ•Ô∏è', cicilan:[{bulan:3,cicilan:940000},{bulan:6,cicilan:490000},{bulan:12,cicilan:275000}] },
    { id:16, name:'Lampu LED Smart', price:1200000, category:'furniture', image:'üí°', cicilan:[{bulan:3,cicilan:400000},{bulan:6,cicilan:210000},{bulan:12,cicilan:120000}] },
    { id:17, name:'Rak Display Modern', price:1600000, category:'furniture', image:'üìö', cicilan:[{bulan:3,cicilan:540000},{bulan:6,cicilan:280000},{bulan:12,cicilan:160000}] },
  ];

  const categories = [
    {key:'all',label:'üõçÔ∏è Semua'},{key:'handphone',label:'üì± Handphone'},
    {key:'laptop',label:'üíª Laptop'},{key:'elektronik',label:'üéß Elektronik'},
    {key:'kamera',label:'üì∑ Kamera'},{key:'furniture',label:'ü™ë Furniture'},
  ];

  function getProducts() {
    try { const d=localStorage.getItem('katalog_products'); return d?JSON.parse(d):DEFAULT_PRODUCTS; }
    catch { return DEFAULT_PRODUCTS; }
  }

  const fmt = n => new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR',minimumFractionDigits:0}).format(n);
  const isUrl = s => s&&(s.startsWith('http')||s.startsWith('//'));

  let activeCategory = 'all';

  function mediaCard(img) {
    return isUrl(img) ? `<img class="card-img" src="${img}" alt="produk" onerror="this.style.display='none'"/>` : `<span class="card-emoji">${img||'üì¶'}</span>`;
  }

  function mediaModal(img) {
    return isUrl(img) ? `<img class="modal-img-url" src="${img}" alt="produk"/>` : `<span class="modal-img-emoji">${img||'üì¶'}</span>`;
  }

  function renderFilters() {
    const wrap = document.getElementById('filterWrap');
    wrap.innerHTML = categories.map(c=>`<button class="filter-btn ${c.key===activeCategory?'active':''}" data-key="${c.key}">${c.label}</button>`).join('');
    wrap.querySelectorAll('.filter-btn').forEach(btn=>{
      btn.addEventListener('click',()=>{ activeCategory=btn.dataset.key; renderFilters(); renderGrid(); });
    });
  }

  function renderGrid() {
    const q=(document.getElementById('searchInput').value||'').toLowerCase();
    const sort=document.getElementById('sortSelect').value;
    let data=getProducts();
    if(activeCategory!=='all') data=data.filter(p=>p.category===activeCategory);
    if(q) data=data.filter(p=>p.name.toLowerCase().includes(q)||p.category.includes(q));
    if(sort==='price-asc') data.sort((a,b)=>a.price-b.price);
    else if(sort==='price-desc') data.sort((a,b)=>b.price-a.price);
    else if(sort==='name-asc') data.sort((a,b)=>a.name.localeCompare(b.name));

    document.getElementById('prodBadge').textContent=`${getProducts().length} Produk`;
    document.getElementById('resultCount').innerHTML=`Menampilkan <strong>${data.length}</strong> produk`;

    const grid=document.getElementById('productGrid');
    if(!data.length){
      grid.innerHTML=`<div class="empty"><div class="empty-icon">üîç</div><p>Produk tidak ditemukan</p></div>`;
      return;
    }
    grid.innerHTML=data.map((p,i)=>`
      <div class="card" style="animation-delay:${i*0.05}s" data-id="${p.id}">
        <div class="card-img-wrap">
          <span class="card-badge">${p.category}</span>
          ${mediaCard(p.image)}
        </div>
        <div class="card-body">
          <div class="card-name">${p.name}</div>
          <div class="card-price">${fmt(p.price)}</div>
        </div>
        <div class="card-footer">
          <div class="card-cicilan-info">${p.cicilan&&p.cicilan.length?`Cicilan mulai<br/><strong style="color:var(--red)">${fmt(p.cicilan[0].cicilan)}/bln</strong>`:''}</div>
          <button class="card-btn">Detail ‚Üí</button>
        </div>
      </div>
    `).join('');
    grid.querySelectorAll('.card').forEach(card=>{
      card.addEventListener('click',()=>openModal(Number(card.dataset.id)));
    });
  }

  function openModal(id) {
    const p=getProducts().find(x=>x.id===id);
    if(!p) return;
    document.getElementById('modalImg').innerHTML=mediaModal(p.image);
    const cicilanHtml=(p.cicilan||[]).map(c=>{
      const total=c.cicilan*c.bulan, selisih=total-p.price;
      return `<button class="cicilan-btn">
        <div class="cicilan-row"><span class="cicilan-months">${c.bulan} Bulan</span></div>
        <div class="cicilan-per-bulan">Cicilan/bulan: <span class="cicilan-amount">${fmt(c.cicilan)}</span></div>
        <hr class="cicilan-divider"/>
        <div class="cicilan-total-row"><span class="cicilan-total-label">Total bayar:</span><span class="cicilan-total-val">${fmt(total)}</span></div>
        ${selisih>0?`<div class="cicilan-bunga">‚ö° Bunga: +${fmt(selisih)}</div>`:''}
      </button>`;
    }).join('');

    document.getElementById('modalBody').innerHTML=`
      <div class="modal-cat">${p.category}</div>
      <div class="modal-title">${p.name}</div>
      <div class="modal-price-box">
        <div><div class="modal-price-label">Harga Tunai</div><div class="modal-price-value">${fmt(p.price)}</div></div>
        <div style="font-size:2rem">üè∑Ô∏è</div>
      </div>
      ${cicilanHtml?`<div class="cicilan-section"><div class="cicilan-title">Pilihan Cicilan</div>${cicilanHtml}</div>`:''}
      <div class="features">
        <div class="feature-item"><div class="check-icon">‚úì</div> Garansi Resmi</div>
        <div class="feature-item"><div class="check-icon">‚úì</div> Gratis Ongkos Kirim</div>
        <div class="feature-item"><div class="check-icon">‚úì</div> Bisa Dikembalikan 30 Hari</div>
      </div>
      <button class="wa-btn" id="waBtn"><span style="font-size:1.3rem">üí¨</span> Hubungi via WhatsApp</button>
    `;

    document.getElementById('waBtn').addEventListener('click',()=>{
      const msg=`Halo, saya tertarik dengan *${p.name}*\n\nHarga: ${fmt(p.price)}\n\nOpsi cicilan:\n${(p.cicilan||[]).map(c=>`‚Ä¢ ${c.bulan} bulan: ${fmt(c.cicilan)}/bulan`).join('\n')}\n\nMohon informasi lebih lanjut üôè`;
      window.open(`https://wa.me/62?text=${encodeURIComponent(msg)}`,'_blank');
    });

    document.getElementById('modalBackdrop').classList.add('open');
    document.body.style.overflow='hidden';
  }

  function closeModal() {
    document.getElementById('modalBackdrop').classList.remove('open');
    document.body.style.overflow='';
  }

  document.getElementById('modalClose').addEventListener('click',closeModal);
  document.getElementById('modalBackdrop').addEventListener('click',e=>{ if(e.target===document.getElementById('modalBackdrop')) closeModal(); });
  document.addEventListener('keydown',e=>{ if(e.key==='Escape') closeModal(); });
  window.addEventListener('scroll',()=>{
    document.getElementById('scrollTop').classList.toggle('show',window.scrollY>300);
  });

  renderFilters();
  renderGrid();
</script>
</body>
</html>
